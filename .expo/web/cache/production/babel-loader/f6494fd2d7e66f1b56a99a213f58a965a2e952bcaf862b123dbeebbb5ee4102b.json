{"ast":null,"code":"const express=require('express');const cors=require('cors');const bodyParser=require('body-parser');const bcrypt=require('bcryptjs');const jwt=require('jsonwebtoken');const mysql=require('mysql2/promise');const nodemailer=require('nodemailer');const crypto=require('crypto');const passport=require('passport');const GoogleStrategy=require('passport-google-oauth20').Strategy;require('dotenv').config();const app=express();app.use(cors());app.use(bodyParser.json());app.use(passport.initialize());const JWT_SECRET=process.env.JWT_SECRET||'change_this_secret';async function getDB(){return mysql.createPool({host:process.env.DB_HOST,user:process.env.DB_USER,password:process.env.DB_PASS,database:process.env.DB_NAME,port:process.env.DB_PORT||3306,waitForConnections:true,connectionLimit:10,queueLimit:0});}function generarPasswordAleatoria(longitud=10){const chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%&*';let pass='';for(let i=0;i<longitud;i++){pass+=chars.charAt(Math.floor(Math.random()*chars.length));}return pass;}function authMiddleware(req,res,next){const auth=req.headers.authorization;if(!auth)return res.status(401).json({error:'No token'});const token=auth.split(' ')[1];try{req.user=jwt.verify(token,JWT_SECRET);next();}catch{return res.status(401).json({error:'Token inválido'});}}function adminOnly(req,res,next){if(!req.user||req.user.rol!=='admin')return res.status(403).json({error:'Solo administradores'});next();}passport.use(new GoogleStrategy({clientID:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET,callbackURL:process.env.GOOGLE_CALLBACK_URL},async(accessToken,refreshToken,profile,done)=>{try{const db=await getDB();const correo=profile.emails[0].value;const[rows]=await db.execute('SELECT * FROM users WHERE correo = ?',[correo]);let user;if(rows.length>0){user=rows[0];}else{const tempPassword=generarPasswordAleatoria();const hash=await bcrypt.hash(tempPassword,10);const[result]=await db.execute(`INSERT INTO users (nombre, correo, usuario, password, rol, verificado, createdAt, updatedAt)\n           VALUES (?,?,?,?,?,1,NOW(),NOW())`,[profile.displayName,correo,profile.id,hash,'cliente']);user={id:result.insertId,nombre:profile.displayName,correo,usuario:profile.id,rol:'cliente'};}const token=jwt.sign({id:user.id,usuario:user.usuario,rol:user.rol,correo:user.correo,nombre:user.nombre},JWT_SECRET,{expiresIn:'7d'});done(null,token);}catch(err){done(err,null);}}));app.get('/auth/google',passport.authenticate('google',{scope:['profile','email']}));app.get('/auth/google/callback',passport.authenticate('google',{session:false}),(req,res)=>{const token=req.user;res.redirect(`${process.env.CLIENT_URL}/google-callback?token=${token}`);});app.get('/',(req,res)=>res.send('Servidor SportLike funcionando correctamente'));app.post('/api/register',async(req,res)=>{const{nombre,apellidoP,apellidoM,fechaNac,correo,telefono,usuario,password,rol}=req.body;if(!nombre||!apellidoP||!usuario||!correo||!password)return res.status(400).json({error:'Faltan campos requeridos'});try{const db=await getDB();const[existing]=await db.execute('SELECT id FROM users WHERE usuario = ? OR correo = ? OR telefono = ?',[usuario,correo,telefono||null]);if(existing.length>0)return res.status(400).json({error:'Usuario, correo o teléfono ya registrado'});const hash=await bcrypt.hash(password,10);const[result]=await db.execute(`INSERT INTO users (nombre, apellidoP, apellidoM, fechaNac, correo, telefono, usuario, password, rol, verificado, createdAt, updatedAt)\n       VALUES (?,?,?,?,?,?,?,?,?,0,NOW(),NOW())`,[nombre,apellidoP,apellidoM||null,fechaNac||null,correo,telefono||null,usuario,hash,rol||'cliente']);const token=jwt.sign({id:result.insertId,correo},JWT_SECRET,{expiresIn:'1d'});const transporter=nodemailer.createTransport({host:process.env.EMAIL_HOST,port:process.env.EMAIL_PORT,secure:false,auth:{user:process.env.EMAIL_USER,pass:process.env.EMAIL_PASS}});const verifyLink=`${process.env.CLIENT_URL}/verify-email?token=${token}`;await transporter.sendMail({from:process.env.EMAIL_FROM,to:correo,subject:'Verifica tu correo - SportLike',html:`<p>Hola ${nombre},</p><p>Para activar tu cuenta, haz clic en el siguiente enlace:</p><a href=\"${verifyLink}\">Verificar correo</a><p>Si no creaste esta cuenta, ignora este correo.</p>`});res.json({message:'Usuario registrado correctamente. Revisa tu correo para activar tu cuenta.'});}catch(err){console.error(err);res.status(500).json({error:'Error registrando usuario'});}});app.post('/api/login',async(req,res)=>{const{usuario,password}=req.body;try{const db=await getDB();const[rows]=await db.execute('SELECT * FROM users WHERE usuario = ?',[usuario]);if(rows.length===0)return res.status(401).json({error:'Usuario no encontrado'});const user=rows[0];if(user.verificado===0)return res.status(403).json({error:'Debes verificar tu correo antes de iniciar sesión'});const match=await bcrypt.compare(password,user.password);if(!match)return res.status(401).json({error:'Contraseña incorrecta'});const jwtToken=jwt.sign({id:user.id,usuario:user.usuario,rol:user.rol,correo:user.correo},JWT_SECRET,{expiresIn:'7d'});res.json({user:{id:user.id,nombre:user.nombre,usuario:user.usuario,rol:user.rol,correo:user.correo},token:jwtToken});}catch(err){console.error(err);res.status(500).json({error:'Error en login'});}});app.get('/api/verify-email',async(req,res)=>{const token=req.query.token;if(!token)return res.status(400).send('Token inválido');try{const decoded=jwt.verify(token,JWT_SECRET);const db=await getDB();await db.execute('UPDATE users SET verificado = 1 WHERE id = ?',[decoded.id]);res.send('Correo verificado correctamente. Ahora puedes iniciar sesión.');}catch{res.status(400).send('Token inválido o expirado');}});app.post('/api/forgot-password',async(req,res)=>{const{correo}=req.body;if(!correo)return res.status(400).json({error:'Correo requerido'});try{const db=await getDB();const[users]=await db.execute('SELECT id, nombre FROM users WHERE correo = ?',[correo]);if(users.length===0)return res.status(404).json({error:'Usuario no encontrado'});const userId=users[0].id;const nombre=users[0].nombre;const token=crypto.randomBytes(32).toString('hex');const expires=new Date(Date.now()+3600000);await db.execute('INSERT INTO Token (userId, token, expires, createdAt) VALUES (?, ?, ?, NOW())',[userId,token,expires]);const transporter=nodemailer.createTransport({host:process.env.EMAIL_HOST,port:process.env.EMAIL_PORT,secure:false,auth:{user:process.env.EMAIL_USER,pass:process.env.EMAIL_PASS}});const resetLink=`${process.env.CLIENT_URL}/reset-password?token=${token}`;await transporter.sendMail({from:process.env.EMAIL_FROM,to:correo,subject:'Recuperación de contraseña - SportLike',html:`<p>Hola ${nombre},</p><p>Haz solicitado restablecer tu contraseña. Haz clic en el siguiente enlace:</p><a href=\"${resetLink}\">Restablecer contraseña</a><p>Si no solicitaste esto, ignora este correo.</p>`});res.json({message:'Correo de recuperación enviado'});}catch(err){console.error(err);res.status(500).json({error:'Error procesando solicitud'});}});app.post('/api/reset-password',async(req,res)=>{const{token,password}=req.body;if(!token||!password)return res.status(400).json({error:'Token y contraseña requeridos'});if(password.length<6)return res.status(400).json({error:'La contraseña debe tener al menos 6 caracteres'});try{const db=await getDB();const[rows]=await db.execute('SELECT userId, expires FROM Token WHERE token = ?',[token]);if(rows.length===0)return res.status(400).json({error:'Token inválido'});const tokenData=rows[0];if(new Date(tokenData.expires)<new Date())return res.status(400).json({error:'Token expirado'});const hash=await bcrypt.hash(password,10);await db.execute('UPDATE users SET password = ? WHERE id = ?',[hash,tokenData.userId]);await db.execute('DELETE FROM Token WHERE token = ?',[token]);res.json({message:'Contraseña restablecida correctamente'});}catch(err){console.error(err);res.status(500).json({error:'Error restableciendo contraseña'});}});app.post('/api/update-profile',authMiddleware,async(req,res)=>{const{nombre,apellidoP,apellidoM,telefono,usuario}=req.body;if(!nombre||!apellidoP||!usuario)return res.status(400).json({error:'Faltan campos requeridos'});try{const db=await getDB();const[exists]=await db.execute('SELECT id FROM users WHERE (usuario = ? OR telefono = ?) AND id != ?',[usuario,telefono||null,req.user.id]);if(exists.length>0)return res.status(400).json({error:'Usuario o teléfono ya registrado'});await db.execute(`UPDATE users SET nombre=?, apellidoP=?, apellidoM=?, telefono=?, usuario=?, updatedAt=NOW() WHERE id=?`,[nombre,apellidoP,apellidoM||null,telefono||null,usuario,req.user.id]);res.json({message:'Perfil actualizado correctamente'});}catch(err){console.error(err);res.status(500).json({error:'Error actualizando perfil'});}});app.post('/api/update-password',authMiddleware,async(req,res)=>{const{actual,nueva}=req.body;if(!actual||!nueva)return res.status(400).json({error:'Debes enviar ambas contraseñas'});try{const db=await getDB();const[rows]=await db.execute('SELECT password FROM users WHERE id=?',[req.user.id]);if(rows.length===0)return res.status(404).json({error:'Usuario no encontrado'});const match=await bcrypt.compare(actual,rows[0].password);if(!match)return res.status(401).json({error:'La contraseña actual es incorrecta'});const hash=await bcrypt.hash(nueva,10);await db.execute('UPDATE users SET password=?, updatedAt=NOW() WHERE id=?',[hash,req.user.id]);res.json({message:'Contraseña actualizada correctamente'});}catch(err){console.error(err);res.status(500).json({error:'Error actualizando contraseña'});}});app.get('/api/users',authMiddleware,adminOnly,async(req,res)=>{try{const db=await getDB();const[rows]=await db.execute('SELECT id, nombre, apellidoP, apellidoM, correo, usuario, rol FROM users');res.json(rows);}catch(err){console.error(err);res.status(500).json({error:'Error al obtener usuarios'});}});const PORT=process.env.PORT||5000;app.listen(PORT,()=>console.log(`Servidor corriendo en http://localhost:${PORT}`));","map":{"version":3,"names":["express","require","cors","bodyParser","bcrypt","jwt","mysql","nodemailer","crypto","passport","GoogleStrategy","Strategy","config","app","use","json","initialize","JWT_SECRET","process","env","getDB","createPool","host","DB_HOST","user","DB_USER","password","DB_PASS","database","DB_NAME","port","DB_PORT","waitForConnections","connectionLimit","queueLimit","generarPasswordAleatoria","longitud","chars","pass","i","charAt","Math","floor","random","length","authMiddleware","req","res","next","auth","headers","authorization","status","error","token","split","verify","adminOnly","rol","clientID","GOOGLE_CLIENT_ID","clientSecret","GOOGLE_CLIENT_SECRET","callbackURL","GOOGLE_CALLBACK_URL","accessToken","refreshToken","profile","done","db","correo","emails","value","rows","execute","tempPassword","hash","result","displayName","id","insertId","nombre","usuario","sign","expiresIn","err","get","authenticate","scope","session","redirect","CLIENT_URL","send","post","apellidoP","apellidoM","fechaNac","telefono","body","existing","transporter","createTransport","EMAIL_HOST","EMAIL_PORT","secure","EMAIL_USER","EMAIL_PASS","verifyLink","sendMail","from","EMAIL_FROM","to","subject","html","message","console","verificado","match","compare","jwtToken","query","decoded","users","userId","randomBytes","toString","expires","Date","now","resetLink","tokenData","exists","actual","nueva","PORT","listen","log"],"sources":["C:/Users/saul2/Downloads/Sportlike/server/server.js"],"sourcesContent":["const express = require('express');\nconst cors = require('cors');\nconst bodyParser = require('body-parser');\nconst bcrypt = require('bcryptjs');\nconst jwt = require('jsonwebtoken');\nconst mysql = require('mysql2/promise');\nconst nodemailer = require('nodemailer');\nconst crypto = require('crypto');\nconst passport = require('passport');\nconst GoogleStrategy = require('passport-google-oauth20').Strategy;\nrequire('dotenv').config();\n\nconst app = express();\napp.use(cors());\napp.use(bodyParser.json());\napp.use(passport.initialize());\n\nconst JWT_SECRET = process.env.JWT_SECRET || 'change_this_secret';\n\nasync function getDB() {\n  return mysql.createPool({\n    host: process.env.DB_HOST,\n    user: process.env.DB_USER,\n    password: process.env.DB_PASS,\n    database: process.env.DB_NAME,\n    port: process.env.DB_PORT || 3306,\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0\n  });\n}\n\nfunction generarPasswordAleatoria(longitud = 10) {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%&*';\n  let pass = '';\n  for (let i = 0; i < longitud; i++) {\n    pass += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return pass;\n}\n\nfunction authMiddleware(req, res, next) {\n  const auth = req.headers.authorization;\n  if (!auth) return res.status(401).json({ error: 'No token' });\n  const token = auth.split(' ')[1];\n  try {\n    req.user = jwt.verify(token, JWT_SECRET);\n    next();\n  } catch {\n    return res.status(401).json({ error: 'Token inválido' });\n  }\n}\n\nfunction adminOnly(req, res, next) {\n  if (!req.user || req.user.rol !== 'admin') return res.status(403).json({ error: 'Solo administradores' });\n  next();\n}\n\npassport.use(new GoogleStrategy(\n  {\n    clientID: process.env.GOOGLE_CLIENT_ID,\n    clientSecret: process.env.GOOGLE_CLIENT_SECRET,\n    callbackURL: process.env.GOOGLE_CALLBACK_URL\n  },\n  async (accessToken, refreshToken, profile, done) => {\n    try {\n      const db = await getDB();\n      const correo = profile.emails[0].value;\n      const [rows] = await db.execute('SELECT * FROM users WHERE correo = ?', [correo]);\n      let user;\n      if (rows.length > 0) {\n        user = rows[0];\n      } else {\n        const tempPassword = generarPasswordAleatoria();\n        const hash = await bcrypt.hash(tempPassword, 10);\n        const [result] = await db.execute(\n          `INSERT INTO users (nombre, correo, usuario, password, rol, verificado, createdAt, updatedAt)\n           VALUES (?,?,?,?,?,1,NOW(),NOW())`,\n          [profile.displayName, correo, profile.id, hash, 'cliente']\n        );\n        user = {\n          id: result.insertId,\n          nombre: profile.displayName,\n          correo,\n          usuario: profile.id,\n          rol: 'cliente'\n        };\n      }\n      const token = jwt.sign(\n        { id: user.id, usuario: user.usuario, rol: user.rol, correo: user.correo, nombre: user.nombre },\n        JWT_SECRET,\n        { expiresIn: '7d' }\n      );\n      done(null, token);\n    } catch (err) {\n      done(err, null);\n    }\n  }\n));\n\napp.get('/auth/google', passport.authenticate('google', { scope: ['profile', 'email'] }));\napp.get('/auth/google/callback', passport.authenticate('google', { session: false }), (req, res) => {\n  const token = req.user;\n  res.redirect(`${process.env.CLIENT_URL}/google-callback?token=${token}`);\n});\n\napp.get('/', (req, res) => res.send('Servidor SportLike funcionando correctamente'));\n\napp.post('/api/register', async (req, res) => {\n  const { nombre, apellidoP, apellidoM, fechaNac, correo, telefono, usuario, password, rol } = req.body;\n  if (!nombre || !apellidoP || !usuario || !correo || !password) return res.status(400).json({ error: 'Faltan campos requeridos' });\n  try {\n    const db = await getDB();\n    const [existing] = await db.execute('SELECT id FROM users WHERE usuario = ? OR correo = ? OR telefono = ?', [usuario, correo, telefono || null]);\n    if (existing.length > 0) return res.status(400).json({ error: 'Usuario, correo o teléfono ya registrado' });\n    const hash = await bcrypt.hash(password, 10);\n    const [result] = await db.execute(\n      `INSERT INTO users (nombre, apellidoP, apellidoM, fechaNac, correo, telefono, usuario, password, rol, verificado, createdAt, updatedAt)\n       VALUES (?,?,?,?,?,?,?,?,?,0,NOW(),NOW())`,\n      [nombre, apellidoP, apellidoM || null, fechaNac || null, correo, telefono || null, usuario, hash, rol || 'cliente']\n    );\n    const token = jwt.sign({ id: result.insertId, correo }, JWT_SECRET, { expiresIn: '1d' });\n    const transporter = nodemailer.createTransport({\n      host: process.env.EMAIL_HOST,\n      port: process.env.EMAIL_PORT,\n      secure: false,\n      auth: { user: process.env.EMAIL_USER, pass: process.env.EMAIL_PASS }\n    });\n    const verifyLink = `${process.env.CLIENT_URL}/verify-email?token=${token}`;\n    await transporter.sendMail({\n      from: process.env.EMAIL_FROM,\n      to: correo,\n      subject: 'Verifica tu correo - SportLike',\n      html: `<p>Hola ${nombre},</p><p>Para activar tu cuenta, haz clic en el siguiente enlace:</p><a href=\"${verifyLink}\">Verificar correo</a><p>Si no creaste esta cuenta, ignora este correo.</p>`\n    });\n    res.json({ message: 'Usuario registrado correctamente. Revisa tu correo para activar tu cuenta.' });\n  } catch (err) {\n    console.error(err);\n    res.status(500).json({ error: 'Error registrando usuario' });\n  }\n});\n\napp.post('/api/login', async (req, res) => {\n  const { usuario, password } = req.body;\n  try {\n    const db = await getDB();\n    const [rows] = await db.execute('SELECT * FROM users WHERE usuario = ?', [usuario]);\n    if (rows.length === 0) return res.status(401).json({ error: 'Usuario no encontrado' });\n    const user = rows[0];\n    if (user.verificado === 0) return res.status(403).json({ error: 'Debes verificar tu correo antes de iniciar sesión' });\n    const match = await bcrypt.compare(password, user.password);\n    if (!match) return res.status(401).json({ error: 'Contraseña incorrecta' });\n    const jwtToken = jwt.sign({ id: user.id, usuario: user.usuario, rol: user.rol, correo: user.correo }, JWT_SECRET, { expiresIn: '7d' });\n    res.json({ user: { id: user.id, nombre: user.nombre, usuario: user.usuario, rol: user.rol, correo: user.correo }, token: jwtToken });\n  } catch (err) {\n    console.error(err);\n    res.status(500).json({ error: 'Error en login' });\n  }\n});\n\napp.get('/api/verify-email', async (req, res) => {\n  const token = req.query.token;\n  if (!token) return res.status(400).send('Token inválido');\n  try {\n    const decoded = jwt.verify(token, JWT_SECRET);\n    const db = await getDB();\n    await db.execute('UPDATE users SET verificado = 1 WHERE id = ?', [decoded.id]);\n    res.send('Correo verificado correctamente. Ahora puedes iniciar sesión.');\n  } catch {\n    res.status(400).send('Token inválido o expirado');\n  }\n});\n\napp.post('/api/forgot-password', async (req, res) => {\n  const { correo } = req.body;\n  if (!correo) return res.status(400).json({ error: 'Correo requerido' });\n  try {\n    const db = await getDB();\n    const [users] = await db.execute('SELECT id, nombre FROM users WHERE correo = ?', [correo]);\n    if (users.length === 0) return res.status(404).json({ error: 'Usuario no encontrado' });\n    const userId = users[0].id;\n    const nombre = users[0].nombre;\n    const token = crypto.randomBytes(32).toString('hex');\n    const expires = new Date(Date.now() + 3600000);\n    await db.execute('INSERT INTO Token (userId, token, expires, createdAt) VALUES (?, ?, ?, NOW())', [userId, token, expires]);\n    const transporter = nodemailer.createTransport({\n      host: process.env.EMAIL_HOST,\n      port: process.env.EMAIL_PORT,\n      secure: false,\n      auth: { user: process.env.EMAIL_USER, pass: process.env.EMAIL_PASS }\n    });\n    const resetLink = `${process.env.CLIENT_URL}/reset-password?token=${token}`;\n    await transporter.sendMail({\n      from: process.env.EMAIL_FROM,\n      to: correo,\n      subject: 'Recuperación de contraseña - SportLike',\n      html: `<p>Hola ${nombre},</p><p>Haz solicitado restablecer tu contraseña. Haz clic en el siguiente enlace:</p><a href=\"${resetLink}\">Restablecer contraseña</a><p>Si no solicitaste esto, ignora este correo.</p>`\n    });\n    res.json({ message: 'Correo de recuperación enviado' });\n  } catch (err) {\n    console.error(err);\n    res.status(500).json({ error: 'Error procesando solicitud' });\n  }\n});\n\napp.post('/api/reset-password', async (req, res) => {\n  const { token, password } = req.body;\n  if (!token || !password) return res.status(400).json({ error: 'Token y contraseña requeridos' });\n  if (password.length < 6) return res.status(400).json({ error: 'La contraseña debe tener al menos 6 caracteres' });\n  try {\n    const db = await getDB();\n    const [rows] = await db.execute('SELECT userId, expires FROM Token WHERE token = ?', [token]);\n    if (rows.length === 0) return res.status(400).json({ error: 'Token inválido' });\n    const tokenData = rows[0];\n    if (new Date(tokenData.expires) < new Date()) return res.status(400).json({ error: 'Token expirado' });\n    const hash = await bcrypt.hash(password, 10);\n    await db.execute('UPDATE users SET password = ? WHERE id = ?', [hash, tokenData.userId]);\n    await db.execute('DELETE FROM Token WHERE token = ?', [token]);\n    res.json({ message: 'Contraseña restablecida correctamente' });\n  } catch (err) {\n    console.error(err);\n    res.status(500).json({ error: 'Error restableciendo contraseña' });\n  }\n});\n\napp.post('/api/update-profile', authMiddleware, async (req, res) => {\n  const { nombre, apellidoP, apellidoM, telefono, usuario } = req.body;\n  if (!nombre || !apellidoP || !usuario) return res.status(400).json({ error: 'Faltan campos requeridos' });\n  try {\n    const db = await getDB();\n    const [exists] = await db.execute('SELECT id FROM users WHERE (usuario = ? OR telefono = ?) AND id != ?', [usuario, telefono || null, req.user.id]);\n    if (exists.length > 0) return res.status(400).json({ error: 'Usuario o teléfono ya registrado' });\n    await db.execute(\n      `UPDATE users SET nombre=?, apellidoP=?, apellidoM=?, telefono=?, usuario=?, updatedAt=NOW() WHERE id=?`,\n      [nombre, apellidoP, apellidoM || null, telefono || null, usuario, req.user.id]\n    );\n    res.json({ message: 'Perfil actualizado correctamente' });\n  } catch (err) {\n    console.error(err);\n    res.status(500).json({ error: 'Error actualizando perfil' });\n  }\n});\n\napp.post('/api/update-password', authMiddleware, async (req, res) => {\n  const { actual, nueva } = req.body;\n  if (!actual || !nueva) return res.status(400).json({ error: 'Debes enviar ambas contraseñas' });\n  try {\n    const db = await getDB();\n    const [rows] = await db.execute('SELECT password FROM users WHERE id=?', [req.user.id]);\n    if (rows.length === 0) return res.status(404).json({ error: 'Usuario no encontrado' });\n    const match = await bcrypt.compare(actual, rows[0].password);\n    if (!match) return res.status(401).json({ error: 'La contraseña actual es incorrecta' });\n    const hash = await bcrypt.hash(nueva, 10);\n    await db.execute('UPDATE users SET password=?, updatedAt=NOW() WHERE id=?', [hash, req.user.id]);\n    res.json({ message: 'Contraseña actualizada correctamente' });\n  } catch (err) {\n    console.error(err);\n    res.status(500).json({ error: 'Error actualizando contraseña' });\n  }\n});\n\napp.get('/api/users', authMiddleware, adminOnly, async (req, res) => {\n  try {\n    const db = await getDB();\n    const [rows] = await db.execute('SELECT id, nombre, apellidoP, apellidoM, correo, usuario, rol FROM users');\n    res.json(rows);\n  } catch (err) {\n    console.error(err);\n    res.status(500).json({ error: 'Error al obtener usuarios' });\n  }\n});\n\nconst PORT = process.env.PORT || 5000;\napp.listen(PORT, () => console.log(`Servidor corriendo en http://localhost:${PORT}`));\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}